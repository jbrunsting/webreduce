{% extends "base.html" %}

{% block content %}
<h1>Plugins</h1>
<p><a href="/plugins/create">New plugin</a></p>
{% for plugin, versions in plugins.items %}
<h2>{{ plugin.name }}</h2>
<sub>{{ plugin.description }}</sub>
<p><a href="/plugins/update/{{ plugin.id }}">New version</a></p>
{% for version in versions %}
<h3><a href="/plugins/view/{{ version.id }}">v{{ version.major_version }}.{{ version.minor_version }}</a></h3>
{% if version.published %}
{% if version.approved %}
Approved
{% elif version.rejected %}
Rejected: {{ version.rejection_reason }}
{% else %}
Pending approval
{% endif %}
{% else %}
<p><a href="/plugins/edit/{{ version.id }}">Edit</a></p>
<form action="/plugins/publish/{{ version.id }}" method="post">
{% csrf_token %}
<button type="submit">Publish</button>
</form>
{% endif %}
{% endfor %}
{% endfor %}
{% endblock %}
